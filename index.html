<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- SEO Meta Tags -->
  <title>Oh! My Japanese Flashcard - T·ª´ V·ª±ng L√°i Xe Nh·∫≠t B·∫£n</title>
  <meta name="description" content="H·ªçc t·ª´ v·ª±ng ti·∫øng Nh·∫≠t cho l·ªõp h·ªçc l√°i xe. B·ªô kh·∫©u l·ªánh ƒë·∫ßy ƒë·ªß v·ªõi ph√°t √¢m audio, flash card t∆∞∆°ng t√°c.">
  <meta name="keywords" content="ti·∫øng Nh·∫≠t, l√°i xe, t·ª´ v·ª±ng, flash card, h·ªçc ti·∫øng Nh·∫≠t, driving school, Japanese vocabulary">
  <meta name="author" content="Oh! My Japanese Flashcard">
  
  <!-- Open Graph / Social Media -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Oh! My Japanese Flashcard - T·ª´ V·ª±ng L√°i Xe Nh·∫≠t B·∫£n">
  <meta property="og:description" content="H·ªçc t·ª´ v·ª±ng ti·∫øng Nh·∫≠t cho l·ªõp h·ªçc l√°i xe v·ªõi flash card t∆∞∆°ng t√°c v√† ph√°t √¢m audio.">
  <meta property="og:image" content="assets/favicon.svg">
  
  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="assets/favicon.svg">
  <link rel="apple-touch-icon" href="assets/icon-192.png">
  <link rel="manifest" href="manifest.json">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  
  <link rel="stylesheet" href="styles.css?v=11">
  
  <!-- Alpine.js -->
  <script type="module" src="js/alpine-store.js?v=11"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>
<body x-data x-init="$store.app.init()">
  <!-- Dictionary Modal -->
  <div class="dict-modal-overlay" x-show="$store.app.showDictMenu" x-transition.opacity @click="$store.app.showDictMenu = false">
    <div class="dict-modal" @click.stop>
      <h2 class="dict-modal-title">Select Dictionary</h2>
      <template x-for="d in $store.app.dictionaries" :key="d.id">
        <button 
          class="dict-menu-item"
          :class="{ active: d.id === $store.app.dictionaryName }"
          @click="$store.app.selectDictionary(d.id)">
          <span class="dict-item-name" x-text="d.name"></span>
          <span class="dict-item-meta">
            <span class="dict-item-desc" x-text="d.description"></span>
            <span class="dict-item-count" x-text="d.wordCount + ' words'"></span>
          </span>
        </button>
      </template>
    </div>
  </div>

  <div class="container">
    <h1 
      class="clickable-title" 
      @click.stop="$store.app.toggleDictMenu()" 
      x-text="$store.app.title"></h1>
    <p class="subtitle" x-text="$store.app.subtitle"></p>
    
    <!-- Mode Toggle -->
    <div class="mode-toggle">
      <template x-for="m in $store.app.modes" :key="m.id">
        <button 
          class="mode-btn" 
          :class="{ active: $store.app.mode === m.id }"
          @click="$store.app.setMode(m.id)"
          x-text="m.label">
        </button>
      </template>
    </div>
    
    <!-- Flash Card -->
    <div class="flashcard-container">
      <div 
        class="flashcard" 
        :class="{ flipped: $store.app.isFlipped }"
        @click="$store.app.flip()"
        x-show="$store.app.words.length > 0">
        <div class="flashcard-front">
          <div class="japanese" x-text="$store.app.frontMain"></div>
          <div class="romaji" x-text="$store.app.frontSub"></div>
          <button 
            class="speak-btn" 
            :class="{ speaking: $store.app.speaking }"
            @click.stop="$store.app.speak()" 
            title="Nghe ph√°t √¢m">
            üîä
          </button>
          <button 
            class="mark-btn" 
            :class="{ remembered: $store.app.isCurrentRemembered }"
            @click.stop="$store.app.toggleRemembered()" 
            title="ƒê√°nh d·∫•u ƒë√£ thu·ªôc"
            x-text="$store.app.isCurrentRemembered ? '‚òÖ' : '‚òÜ'">
          </button>
          <div class="hint">Nh·∫•n ƒë·ªÉ xem nghƒ©a</div>
        </div>
        <div class="flashcard-back">
          <div class="meaning" x-html="$store.app.backMain"></div>
          
          <!-- Example sentence section -->
          <div class="example-section" x-show="$store.app.hasExample">
            <div class="example-row">
              <span class="example-text" x-text="$store.app.exampleText"></span>
              <button 
                class="speak-btn-inline" 
                :class="{ speaking: $store.app.speaking }"
                @click.stop="$store.app.speakExample()" 
                title="Nghe v√≠ d·ª•">
                üîä
              </button>
            </div>
            <div class="example-meaning" x-text="$store.app.exampleMeaning"></div>
          </div>
          
          <button 
            class="speak-btn speak-btn-back" 
            :class="{ speaking: $store.app.speaking }"
            @click.stop="$store.app.speak()" 
            title="Nghe ph√°t √¢m">
            üîä
          </button>
          <button 
            class="mark-btn mark-btn-back" 
            :class="{ remembered: $store.app.isCurrentRemembered }"
            @click.stop="$store.app.toggleRemembered()" 
            title="ƒê√°nh d·∫•u ƒë√£ thu·ªôc"
            x-text="$store.app.isCurrentRemembered ? '‚òÖ' : '‚òÜ'">
          </button>
          <div class="hint">Nh·∫•n ƒë·ªÉ quay l·∫°i</div>
        </div>
      </div>
      
      <!-- Empty state -->
      <div class="flashcard" x-show="$store.app.words.length === 0">
        <div class="flashcard-front">
          <div class="japanese">üéâ</div>
          <div class="romaji">ƒê√£ thu·ªôc h·∫øt!</div>
          <div class="hint"></div>
        </div>
      </div>
    </div>
    
    <!-- Controls -->
    <div class="controls">
      <button 
        class="btn btn-prev" 
        :disabled="$store.app.currentIndex === 0"
        @click="$store.app.prev()" 
        title="Tr∆∞·ªõc">
        ‚ùÆ
      </button>
      <button 
        class="btn btn-auto" 
        :class="{ active: $store.app.autoPlaying }"
        @click="$store.app.toggleAutoPlay()" 
        title="T·ª± ƒë·ªông ph√°t"
        x-text="$store.app.autoPlaying ? '‚ùô‚ùô' : '‚ñ∂'">
      </button>
      <button 
        class="btn btn-shuffle" 
        @click="$store.app.shuffle()" 
        title="Tr·ªôn b√†i"
        x-text="$store.app.shuffleConfirm ? '‚úì' : '‚Üª'">
      </button>
      <button 
        class="btn btn-next" 
        @click="$store.app.next()" 
        title="Sau">
        ‚ùØ
      </button>
    </div>
    
    <!-- Progress -->
    <div class="progress-container">
      <div class="progress-text">
        <template x-if="$store.app.words.length > 0">
          <span>
            Th·∫ª <span x-text="$store.app.progress.current"></span> / <span x-text="$store.app.progress.total"></span>
            <template x-if="$store.app.rememberedCount > 0">
              <span> (<span x-text="$store.app.rememberedCount"></span> ƒë√£ thu·ªôc)</span>
            </template>
          </span>
        </template>
        <template x-if="$store.app.words.length === 0">
          <span>Ho√†n th√†nh!</span>
        </template>
      </div>
      <div class="progress-bar">
        <div class="progress-fill" :style="{ width: $store.app.progress.percent + '%' }"></div>
      </div>
    </div>
    
    <!-- Category Selector -->
    <div class="category-selector" x-show="$store.app.categories.length > 0">
      <label for="category-select">Ch·ªçn ch·ªß ƒë·ªÅ:</label>
      <select 
        id="category-select"
        @change="$store.app.loadCategory($event.target.value)">
        <template x-for="cat in $store.app.categories" :key="cat.id">
          <option :value="cat.id" :selected="cat.id === $store.app.currentCategory.id" x-text="cat.name"></option>
        </template>
      </select>
      
      <!-- Remembered Words List -->
      <div class="remembered-list" :class="{ expanded: $store.app.rememberedListOpen }">
        <button 
          class="remembered-list-toggle" 
          @click="$store.app.rememberedListOpen = !$store.app.rememberedListOpen">
          <span class="toggle-icon">‚ñ∂</span>
          <span>T·ª´ ƒë√£ thu·ªôc (<span x-text="$store.app.rememberedCount"></span>)</span>
        </button>
        <div class="remembered-list-content">
          <ul>
            <template x-if="$store.app.rememberedInCategory.length === 0">
              <div class="remembered-list-empty">Ch∆∞a c√≥ t·ª´ n√†o ƒë∆∞·ª£c ƒë√°nh d·∫•u</div>
            </template>
            <template x-for="(word, idx) in $store.app.rememberedInCategory" :key="word.japanese + '-' + idx">
              <li>
                <div class="word-text">
                  <span class="word-japanese" x-text="word.japanese"></span>
                  <span class="word-meaning" x-text="' - ' + word.meaning"></span>
                </div>
                <button 
                  class="unmark-btn" 
                  @click="$store.app.unmarkRemembered(word.japanese)" 
                  title="B·ªè ƒë√°nh d·∫•u">
                  ‚úï
                </button>
              </li>
            </template>
          </ul>
        </div>
      </div>
    </div>
    
    <!-- Audio Options -->
    <div class="audio-options">
      <label class="checkbox-label">
        <input 
          type="checkbox" 
          :checked="$store.app.readSlow"
          @change="$store.app.toggleReadSlow()">
        <span>üê¢ ƒê·ªçc ch·∫≠m tr∆∞·ªõc</span>
      </label>
      <label class="checkbox-label">
        <input 
          type="checkbox" 
          :checked="$store.app.readBoth"
          @change="$store.app.toggleReadBoth()">
        <span x-text="$store.app.readBothLabel"></span>
      </label>
      <label class="checkbox-label" x-show="$store.app.readBoth">
        <input 
          type="checkbox" 
          :checked="$store.app.readExample"
          @change="$store.app.toggleReadExample()">
        <span>üìù ƒê·ªçc c√¢u v√≠ d·ª•</span>
      </label>
      <label class="checkbox-label">
        <input 
          type="checkbox" 
          :checked="$store.app.spiralMode"
          @change="$store.app.toggleSpiralMode()">
        <span>üåÄ Ch·∫ø ƒë·ªô xo√°y ·ªëc (√¥n l·∫°i t·ª´ tr∆∞·ªõc)</span>
      </label>
      <label class="checkbox-label">
        <input 
          type="checkbox" 
          :checked="$store.app.skipRemembered"
          @change="$store.app.toggleSkipRemembered()">
        <span>‚úÖ B·ªè qua t·ª´ ƒë√£ thu·ªôc</span>
      </label>
      <label class="checkbox-label">
        <input 
          type="checkbox" 
          :checked="$store.app.chorusSound"
          @change="$store.app.toggleChorusSound()">
        <span>üéµ √Çm thanh vui nh·ªôn</span>
      </label>
      <button 
        class="reset-btn" 
        @click="$store.app.resetRemembered()" 
        title="X√≥a t·∫•t c·∫£ ƒë√°nh d·∫•u">
        üóëÔ∏è X√≥a ƒë√°nh d·∫•u
      </button>
    </div>
    
    <!-- Keyboard Shortcuts -->
    <div class="shortcuts">
      <kbd>‚Üê</kbd> <kbd>‚Üí</kbd> Di chuy·ªÉn &nbsp;|&nbsp;
      <kbd>Space</kbd> L·∫≠t th·∫ª &nbsp;|&nbsp;
      <kbd>S</kbd> Tr·ªôn b√†i &nbsp;|&nbsp;
      <kbd>P</kbd> Ph√°t √¢m
    </div>
    
    <!-- Footer -->
    <footer class="footer">
      <a href="https://github.com/tuanchauict/oh-my-japanese-flashcard" target="_blank" rel="noopener noreferrer">Open source on GitHub</a>
    </footer>
  </div>
</body>
</html>
